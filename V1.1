var xPositions = [];
var yPositions = [];
var dropColors = [];
var dropSpeeds = [];
var numDrops = 100;
var currentScene= 0;
var shoot =  500;

var enemyX = 200;
var enemyY = 51;
var enemyVelocityX = 2;
var enemyVelocityY = 0;
var enemyShot = false;

var characterX = 200;
var characterY = 556;
var characterVelX = 0;

var drawChar = function(characterX,characterY){
    //left wing
    strokeWeight(2.5);
    stroke(194, 116, 194);
    fill(255, 255, 255);
    rect(characterX-40,characterY-20,22,20);
    fill(137, 237, 250);
    triangle(characterX+-29,characterY+-107, characterX+-63, characterY+-41,characterX+-42, characterY+-36);
    fill(255, 255, 255);
    rect(characterX-50,characterY-30,22,20);
    rect(characterX-61,characterY-42,22,20);
    //right wing
    rect(characterX+20,characterY-21,22,20);
    fill(137, 237, 250);
    triangle(characterX+33,characterY+-107, characterX+40, characterY+-41,characterX+65, characterY+-34);
    fill(255, 255, 255);
    rect(characterX+32,characterY-30,22,20);
    rect(characterX+40,characterY-42,22,20);
    fill(255, 234, 0);
    noStroke();
    triangle(characterX+-58,characterY+-24,characterX+-49,characterY+-42,characterX+-39,characterY+-24);
    triangle(characterX+61,characterY+-24,characterX+51,characterY+-42,characterX+42,characterY+-24);
    //pilot seat
    fill(0, 0, 0);
    ellipse(characterX,characterY,40,44);
    fill(255, 0, 0);
    ellipse(characterX,characterY+-16,23,11);
    strokeWeight(4);
    stroke(173, 173, 173);
    line(characterX+-9,characterY+-11, characterX+-9, characterY+16);
    line(characterX+9,characterY+-10, characterX+9, characterY+16);
    };

var drawEnemy = function(x,y) {
    fill(0, 255, 17);
    stroke(0, 0, 0);
    strokeWeight(3);
    rect(x,y,40,30);
    strokeWeight(5);
    point(x+10,y+8);
    point(x+30,y+8);
    noFill();
    strokeWeight(3);
    arc(x+20,y+20,30,10,180,360);
};

var createPlayer = function(characterX,characterY){
    drawChar(characterX,characterY);
};

var Player = function(x, y) {
    this.x = x;
    this.y = y;
  
};

Player.prototype.draw = function() {
    this.x = constrain(this.x, 70, 530);
    createPlayer (this.x, this.y, 50);
};

Player.prototype.left = function() {

    this.x -= 5;
};

Player.prototype.right = function() {

    this.x += 5;
};

var player = new Player(200, 500);

for(var i = 0; i< numDrops;++i){
    yPositions.push(random(0,600));
    xPositions.push(random(0,600));
    dropColors.push(color(255, 255, 255));
    dropSpeeds.push(-2);
}

mouseClicked = function(){
    yPositions.push(random(0,600));
    xPositions.push(random(0,600));
};



var gameScene = function(){
        background(4, 8, 46);
    noStroke();
    
      
    for (var i = 0; i < xPositions.length; i++) {
        fill(dropColors[i]);
        ellipse(xPositions[i], yPositions[i], 8,9);
        yPositions[i] += 5;
        yPositions[i] += dropSpeeds[i]; 
        
        yPositions[i] = yPositions[i] %  600;
    }

    if (keyIsPressed && keyCode === LEFT) {
        player.left();
    } 
    else if (keyIsPressed && keyCode === RIGHT){
        player.right();
    }
    if(keyIsPressed && keyCode === UP) {
        stroke(255, 0, 255);
        fill(0, 0, 0);
        ellipse(player.x, shoot,20,20);
        shoot = shoot - 30;
        if (shoot<5) {
            shoot = 500;
        }
    }
  
     
    fill(255, 255, 255);
    noStroke();
    player.draw();
};

draw = function() {
    if (currentScene === 0){
        gameScene();
    }
};

